<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head profile="http://gmpg.org/xfn/11">

	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	
	<title>Manuel Aldana &#8212; Software Engineering: blog &amp; .lessons_learned</title>
	
	<meta name="generator" content="WordPress 2.9.2" /> <!-- leave this for stats -->
  <link rel="shortcut icon" href="../../favicon.ico"/>	
	<link rel="stylesheet" href="../../wp-content/themes/cutlineAldana/style.css" type="text/css" media="screen" />
	<link rel="stylesheet" href="../../wp-content/themes/cutlineAldana/custom_css/custom.css" type="text/css" media="screen" />
	<!--[if lte IE 7]>
	<link rel="stylesheet" type="text/css" href="http://www.aldana-online.de/wp-content/themes/cutlineAldana/ie7.css" media="screen" />
	<![endif]-->
	<!--[if lte IE 6]>
	<link rel="stylesheet" type="text/css" href="http://www.aldana-online.de/wp-content/themes/cutlineAldana/ie6.css" media="screen" />
	<![endif]-->
	<link rel="alternate" type="application/rss+xml" title="Manuel Aldana RSS Feed" href="../../feed/index.html" />
	<link rel="pingback" href="../../xmlrpc.php" />
	<meta name="google-site-verification" content="L4vY5UHsSR0hLG7CXwSvTMmUHiV0P59pw6tX8xhm_kM" />

	<link rel="stylesheet" href="../../wp-content/plugins/codesnippet/codesnippet.css" type="text/css" />
<style type="text/css">
.codesnip-container  {border:1px solid #ccc; background:#eee; padding: 5px;margin:10px;}
</style>
<script type='text/javascript' src='../../wp-includes/js/jquery/jquery.js@ver=1.3.2'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../xmlrpc.php@rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../wp-includes/wlwmanifest.xml" /> 
<link rel='index' title='Manuel Aldana' href='../../index.html' />
<meta name="generator" content="WordPress 2.9.2" />
<link rel="stylesheet" href="../../wp-content/plugins/digg-digg/css/diggdigg-style.css@ver=4.2.css" type="text/css" media="screen" /></head>

<body class="custom">
<div id="container">

<div id="header_text_big">
SOFTWARE ENGINEERING blog &amp; .lessons_learned</div>
<div id="header_text_normal">
manuel aldana
</div>
<div id="header_img">		
		<a href="../../index.html"><img src="../../wp-content/themes/cutlineAldana/images/blogLogoAldana.jpg" alt="Manuel Aldana" title="Manuel Aldana" /></a>		
</div>

	<ul id="nav">
		<li class="rss"><a href="../../feed/index.html">RSS</a></li>
	</ul>

	

	<div id="content_box">
	
		<div id="l_sidebar">
	<ul class="sidebar_list">
				<li id="recent-posts-3" class="widget widget_recent_entries">		<h2 class="widgettitle">Last entries</h2>
		<ul>
				<li><a href="../../2018/05/30/notes-on-dsvgo-gdpr-regarding-comment-function/index.html" title="Notes on DSVGO / GDPR regarding comment function">Notes on DSVGO / GDPR regarding comment function </a></li>
				<li><a href="../../2012/01/26/the-evil-path-of-mobile-apps-vs-webstandards/index.html" title="The evil path of Mobile-Apps (vs. Webstandards)&#8230;">The evil path of Mobile-Apps (vs. Webstandards)&#8230; </a></li>
				<li><a href="../../2011/09/30/complexity-drivers-of-software-systems/index.html" title="Complexity drivers of Software-Systems">Complexity drivers of Software-Systems </a></li>
				<li><a href="../../2011/07/03/accessing-rrdtool-files-data-with-java/index.html" title="Accessing rrdtool-files Data with Java / Scala">Accessing rrdtool-files Data with Java / Scala </a></li>
				<li><a href="../../2011/05/15/embracing-failure-softwareapproaches/index.html" title="&#8216;Embrace Failure&#8217; approaches in Software Development">&#8216;Embrace Failure&#8217; approaches in Software Development </a></li>
				<li><a href="../../2011/03/13/top-tools-for-logging-analysis-cli-based/index.html" title="Top-Tools for Log-Analysis (CLI based)">Top-Tools for Log-Analysis (CLI based) </a></li>
				</ul>
		</li>
<li id="flexi-pages" class="widget flexipages_widget"><h2 class="widgettitle">About me</h2>
<ul>
<li class="page_item page-item-2"><a href="../../about/index.html" title="About me/Contact">About me/Contact</a></li>
<li class="page_item page-item-95"><a href="../../it-skills/index.html" title="IT-Skills">IT-Skills</a></li>
<li class="page_item page-item-115"><a href="../../my-bookshelfbook-highlights/index.html" title="Book Highlights">Book Highlights</a></li>
<li class="page_item page-item-14"><a href="../../open-source/index.html" title="Open Source">Open Source</a></li>
<li class="page_item page-item-19"><a href="../../university/index.html" title="University">University</a></li>
<li class="page_item page-item-21"><a href="../../leisure/index.html" title="Hobbies">Hobbies</a></li>
<li class="page_item page-item-6"><a href="../../camphill/index.html" title="Camphill">Camphill</a></li>
</ul>
</li>
<li id="categories-1" class="widget widget_categories"><h2 class="widgettitle">Blog Categories</h2>
		<ul>
	<li class="cat-item cat-item-4"><a href="../../category/software-engineering/continous-integration/index.html" title="View all posts filed under Continous Integration">Continous Integration</a> (7)
</li>
	<li class="cat-item cat-item-3"><a href="../../category/software-engineering/index.html" title="View all posts filed under Software Engineering">Software Engineering</a> (22)
</li>
	<li class="cat-item cat-item-6"><a href="../../category/software-engineering/software-maintenance/index.html" title="View all posts filed under Software Maintenance">Software Maintenance</a> (5)
</li>
	<li class="cat-item cat-item-20"><a href="../../category/software-engineering/technologies-tools/index.html" title="View all posts filed under Technologies/Tools">Technologies/Tools</a> (10)
</li>
	<li class="cat-item cat-item-1"><a href="../../category/uncategorized/index.html" title="View all posts filed under Uncategorized">Uncategorized</a> (5)
</li>
		</ul>
</li>
<li id="linkcat-2" class="widget widget_links"><h2 class="widgettitle">Important SE Links</h2>

	<ul class='xoxo blogroll'>
<li><a href="http://www.artima.com/weblogs/index.jsp?blogger=beckel" title="well known and pragmatic " target="_blank">Bruce Eckel</a></li>
<li><a href="http://www.codinghorror.com/blog/" target="_blank">Coding Horror</a></li>
<li><a href="http://www.dzone.com/links/index.html" target="_blank">DZone</a></li>
<li><a href="http://www.infoq.com/" target="_blank">InfoQ</a></li>
<li><a href="http://www.joelonsoftware.com/" target="_blank">Joel on Software</a></li>
<li><a href="http://martinfowler.com/bliki/" title="one, of the first pushing refactoring to public" target="_blank">Martin Fowler</a></li>
<li><a href="http://www.se-radio.net/" title="very interesting podcasts from different experts all around software engineering" target="_blank">Software Engineering Radio</a></li>
<li><a href="http://theserverside.com" title="all about enterprise applications (especially with java)" target="_blank">TheServerSide</a></li>

	</ul>
</li>

<li id="search-2" class="widget widget_search"><form method="get" id="search_form" action="../../index.html">
	<input type="text" class="search_input" value="To search, type and hit enter" name="s" id="s" onfocus="if (this.value == 'To search, type and hit enter') {this.value = '';}" onblur="if (this.value == '') {this.value = 'To search, type and hit enter';}" />
	<input type="hidden" id="searchsubmit" value="Search" />
</form>
</li>
	</ul>
</div>
		<div id="content" class="posts">

										
						<h4 class="archive_date">>May 30th, 2010<!-- by manuel aldana --> &middot; <a href="../../2010/05/30/inside-out-modularization/index.html#respond" title="Comment on Inside-Out Modularization">No Comments</a></h4>
			<h2 class="archive_body"><a href="../../2010/05/30/inside-out-modularization/index.html" rel="bookmark" title="Permanent Link to Inside-Out Modularization">Inside-Out Modularization</a></h2>

			<div class="entry">
				<div class='dd_post_share dd_post_share_left'><div class='dd_buttons'><div class='dd_button'><iframe src='http://widgets.dzone.com/links/widgets/zoneit.html?url=http://www.aldana-online.de/2010/05/30/inside-out-modularization/&amp;title=Inside-Out+Modularization&amp;t=1' height='68' width='52' frameborder='0' scrolling='no'></iframe></div></div></div><p>A appropriate modularization of your codebase is important. It has positive side-effects in many directions (testability, code comprehensability, build-speed etc.). Still there are different levels of modularization. These levels can be categorized from fine-grained to coarse grained.</p>
<p><em>Note: For simplicty throughout the post I will use java terms (class, method, package). Of course this can be mapped to other languages constructs like functions, file-includes or plain-script statements.</em></p>
<p style="text-align: center">
<img class="size-full wp-image-167  aligncenter" title="inside-out" src="../../wp-content/uploads/2010/05/inside-out.png" alt="" width="350" height="151" /></p>
<p>Advantage of more fine grained modularization:</p>
<ul>
<li>Maintaining less artifacts (e.g. files, packages, libraries) makes the build/deployment-lifecyle easier.</li>
<li>For simple features code browsing gets easier (&#8220;You see all stuff with one eye-sight&#8221;)</li>
</ul>
<p>The drawback is that the fine grained approach doesn&#8217;t scale: The bigger the codebase gets the more difficult it is to &#8220;see&#8221; any modularization or separatation of concerns. The coarse grained modularization gives you advantage here:</p>
<ul>
<li>Bigger systems are easier to comprehend if the &#8220;split&#8221; is done on package or library level.</li>
<li>Refactorings are getting easier because inside the modules the direct numbers of dependencies get less (submodules only import dependencies they need).</li>
<li>Unit-test setup gets easier (for reason see Refactoring)</li>
</ul>
<h3>Where to start?</h3>
<p>The question is at which modularization level you should start. There are two major antipatterns, either developers sticked on too fine level (e.g. 6000 LOC inside one single file) or they started on a too coarse level (e.g. each of the many packages only contains one or two classes). The too coarse pattern often occurs if you overengineer solution.</p>
<h4>Code from scratch</h4>
<p>To avoid the too fine/coarse pitfall I follow the Inside-Out modularization approach:</p>
<ol>
<li>Start to edit a single file. Implement the highest priority requirements of feature inside the most fine grained &#8220;module&#8221; your language can you offer (e.g. class-method).</li>
<li> When code inside a method gets bigger and you lose overview try to cluster statements (e.g. by speparating them with line-breaks).</li>
<li>When code statement clusters get too many and you see duplications, extract these section to a new method.</li>
<li>When there are too many methods and the lines of code inside the single file are very high, cluster your methods by problem domain and extract them to a new class in the same package.</li>
<li>When there are too many classes inside on package, either create a subpackage or sibling-package which fit to the problem domain (separation of concerns).</li>
<li>When a package hierachy/tree gets too deep and wide, create a new package hierachy (e.g. com.foo becomes com.foo.system1 and com.foo.system2)</li>
<li>When there are too many package hierachies inside one library (like .jar), create another library-project (e.g. Maven project/module).</li>
</ol>
<h4>Integrate changes in existing code</h4>
<p>Above is a more or less complete list when starting with code from scratch. But how does it apply to existing code and integrating changes? The main principle is the same but you would start your Inside-Out modularization on a different level. As Example: If you have to add code inside a class and see it you feature-adding would result in too many methods you start off with step number four (extracting class).</p>
<h3>At which step to level up?</h3>
<p>It is always the question, when to level up from a fine to a more coarse grained modularization. It is very difficult to have a thumb of a rule, because this highly matters on code-style taste, on density of <em>&#8216;if/else&#8217;</em> logic and also on the problem-domain you are trying to solve. A very good test is either ask colleagues for review whether the modularization is intuitive or take another look the next day or a week after to get a fresh view.</p>
<!-- Social Buttons Shared Counts Generated by Digg Digg plugin v4.2, 
    Author : Yong Mook Kim
    Website : http://www.mkyong.com/blog/digg-digg-wordpress-plugin/ -->			</div>	
			<p class="tagged"><span class="add_comment"><a href="../../2010/05/30/inside-out-modularization/index.html#respond" title="Comment on Inside-Out Modularization">&rarr; No Comments</a></span><strong>Tags:</strong> <a href="../../category/software-engineering/index.html" title="View all posts in Software Engineering" rel="category tag">Software Engineering</a> &middot;  <a href="../../category/software-engineering/software-maintenance/index.html" title="View all posts in Software Maintenance" rel="category tag">Software Maintenance</a></p>
			<div class="clear"></div>
			
								
						<h4 class="archive_date">>May 9th, 2010<!-- by manuel aldana --> &middot; <a href="../../2010/05/09/process-implications-of-metric-lines-of-code-loc/index.html#respond" title="Comment on Codebase size implications on Software development">No Comments</a></h4>
			<h2 class="archive_body"><a href="../../2010/05/09/process-implications-of-metric-lines-of-code-loc/index.html" rel="bookmark" title="Permanent Link to Codebase size implications on Software development">Codebase size implications on Software development</a></h2>

			<div class="entry">
				<div class='dd_post_share dd_post_share_left'><div class='dd_buttons'><div class='dd_button'><iframe src='http://widgets.dzone.com/links/widgets/zoneit.html?url=http://www.aldana-online.de/2010/05/09/process-implications-of-metric-lines-of-code-loc/&amp;title=Codebase+size+implications+on+Software+development&amp;t=1' height='68' width='52' frameborder='0' scrolling='no'></iframe></div></div></div><p>Following discusses the implications of big codebases. Codebase size can be measured with the well known &#8216;lines of code&#8217; (LOC) metric. </p>
<p>The following codebase size and LOC metric scope is not fine grained on function or class level but for complete codebase or at least on subcomponent level.</p>
<h3>Bad (anti-pattern): Codebase size as progress metric</h3>
<p>Sometimes (though fortunately rarely) QA or project management is taking codebase size and LOC as a progress metric to see what the project&#8217;s state is. The more lines of code have been written the closer the project is seen to have been completed. This is a definite anti-pattern for following reasons:</p>
<ul>
<li>It is extremely difficult to estimate, how much code will be necessary for a certain scope or a set of requirements. This implies that project or product management cannot know, how much code is missing to mark the requirements as done.</li>
<li>It is more about quality as of quantity of code. Well structured code with avoidance of duplication tends to have less lines of code.</li>
<li>It is very important and valuable to throw away dead code (code which isn&#8217;t used or executed anywhere). Using lines of code as a progress metric would mean this important refactoring will cause a negative project progress.</li>
</ul>
<h3>Good: Codebase size as compexity metric</h3>
<p>With a higher LOC metric you are likely to face following problems:</p>
<ul>
<li>Increase of feeback time: It takes longer to build deployable artifacts, to startup application and to verify implementation behaviour (this both applies to local development and CI servers).</li>
<li>Tougher requirements on development tools: Working on large codebases makes the IDE often run less smoothly (e.g. while doing refactorings, using several debugging techniques).</li>
<li>Code comprehension: More time has to be spent for reverse engineering or reading/understanding documentation. Code comprehension is vital to integrate changes and debugging.</li>
<li>More complex test-setup: Bigger codebases tend to have more complicated test-setup. This includes setting up external components (like databases, containers, message-queues) and also defining test-data (the domain model is likely to be rich).</li>
<li>Fixing bugs: First of all exposing a bug is harder (see test-setup). Further more localization of bug is tougher, because more code has to be narrowed down. Potentially more theories exist to have causes the bug.</li>
<li>Breaking code: New requirements are more difficult to implement and integrate without breaking existing functionality.</li>
<li>Product knowledge leakage: Bigger codebases tend to cover more functionality. The danger increases, that at some point the organization loses knowledge which functionality the software supports. This blindness has very bad implications on defining further requirements or strategies.
<li>Compatibility efforts: The larger a codebase the more likely it is that it already has a long lifetime (codebases tend to grow over the years). Along the age of software down-compatibility is a constant requirement, which increases (a lot of) effort.</li>
<li>Team size + fluctuation: Bigger codebases tend to have been touched by a big size of developers, which can cause knowledge leakage. Due to communication complexity, each developer only knows just a little part of the system and does not distribute it. Even worse due to team-size fluctuation is likely to be higher and knowledge gets completely lost for company.</li>
<li>etc. &#8230;</li>
</ul>
<h3>Quantification of LOC impact is hard</h3>
<p>Above statements are more qualitative and are not quantifiyable, because the exact mapping of a certain LOC number to a magic complexity number is unfeasible. For instance there are other criterias which have an impact on the complexity of a software system, which are independent of LOC:</p>
<ul>
<li>Choice of programming language/system: Maintaining 1.000 LOC of assembly is a complete different story as doing it with 1.000 of Java code.</li>
<li>Problem domain: Complex algorithms (e.g. to be found in AI or image processing) tend to have less lines of code but still are complicated.</li>
<li>Heterogenity of chosen technology in your complete source-code ecosystem: E.g. using 10 different frameworks and/or programming-languages and making them integrate to the overall system harder as concentrating on one  framework.</li>
<li>Quality and existence of documentation: E.g. Api-interfaces aren&#8217;t documented or motivations for major design decision are unknown. From developers point of view such a system is effectively more complex because a lot of effort has to be spent in reverse engineering.</li>
<li>etc. &#8230;</li>
</ul>
<h3>Conclusion</h3>
<p>The metric LOC representing codebase size has a big impact on your whole software development cycle. Therefore it should be measured, observed and tracked over time (also by subcomponent). Apart from showing you the current state and evolution of your codebase from historical point of view you can also use it proactively for future:</p>
<ul>
<li>Estimation/planning: When estimating features take the LOC metric has influence criteria. The higher the LOC the more complicated it will be to integrate feature.</li>
<li>YAGNI: Take YAGNI (&#8220;you ain&#8217;t gonna need it&#8221;) principle to the extreme. Only implement really necessary features. Do not make your software over-extensible and as simple as possible.</li>
<li>Refactor out dead code: Being aware of LOC as a complexity metric, you can create a culture of dead-code awareness. Throw away as much unused code away as you can.</li>
<li>Refactor out dead functionality: Software products often are unneccessarily overcomplex. Also push business towards are more simple product strategy and throw away unused features and achieve a smaller codebase.</li>
</ul>
<!-- Social Buttons Shared Counts Generated by Digg Digg plugin v4.2, 
    Author : Yong Mook Kim
    Website : http://www.mkyong.com/blog/digg-digg-wordpress-plugin/ -->			</div>	
			<p class="tagged"><span class="add_comment"><a href="../../2010/05/09/process-implications-of-metric-lines-of-code-loc/index.html#respond" title="Comment on Codebase size implications on Software development">&rarr; No Comments</a></span><strong>Tags:</strong> <a href="../../category/software-engineering/index.html" title="View all posts in Software Engineering" rel="category tag">Software Engineering</a> &middot;  <a href="../../category/software-engineering/software-maintenance/index.html" title="View all posts in Software Maintenance" rel="category tag">Software Maintenance</a> &middot;  <a href="../../category/uncategorized/index.html" title="View all posts in Uncategorized" rel="category tag">Uncategorized</a></p>
			<div class="clear"></div>
			
								
						<h4 class="archive_date">>April 5th, 2010<!-- by manuel aldana --> &middot; <a href="../../2010/04/05/tomcat-jdbc-realm-in-digest-mode/index.html#respond" title="Comment on Tomcat JDBC-Realm in digest mode">No Comments</a></h4>
			<h2 class="archive_body"><a href="../../2010/04/05/tomcat-jdbc-realm-in-digest-mode/index.html" rel="bookmark" title="Permanent Link to Tomcat JDBC-Realm in digest mode">Tomcat JDBC-Realm in digest mode</a></h2>

			<div class="entry">
				<div class='dd_post_share dd_post_share_left'><div class='dd_buttons'><div class='dd_button'><iframe src='http://widgets.dzone.com/links/widgets/zoneit.html?url=http://www.aldana-online.de/2010/04/05/tomcat-jdbc-realm-in-digest-mode/&amp;title=Tomcat+JDBC-Realm+in+digest+mode&amp;t=1' height='68' width='52' frameborder='0' scrolling='no'></iframe></div></div></div><p>Though the <a href="http://tomcat.apache.org/tomcat-6.0-doc/realm-howto.html" target="_blank">tomcat-docs</a> gives most information, there are some pitfalls when using tomcats facilities for HTTP Auth in Digest mode including hashed passwords. Following is a list to avoid them (tested on tomcat 6.0.x).</p>
<h3>JDBC Driver to classpath</h3>
<p>Tomcat realm handling is container internal, therefore it is not enough to have jdbc-driver (e.g. mysql-connector-java-5.1.6.jar) in your application classpath. You have to explicit add it to the container classpath (e.g. TOMCAT_HOME/lib).</p>
<h3>Configuration Snippets</h3>
<p>Tomcat container config, which can appear as nested element inside &lt;Engine&gt;, &lt;Host&gt; or &lt;Context&gt; (e.g. TOMCAT_HOME/conf/context.xml):</p>
<pre>
<div class="codesnip-container" >
<div class="codesnip">...
<span class="sc3"><span class="coMULTI">&lt;!-- database connection settings + enabling hashed passwords (MD5 sum style) --&gt;</span></span>
<span class="sc3"><span class="re1">&lt;Realm</span>
&nbsp;<span class="re0">className</span>=<span class="st0">"org.apache.catalina.realm.JDBCRealm"</span>
&nbsp;<span class="re0">digest</span>=<span class="st0">"MD5"</span>
&nbsp;<span class="re0">driverName</span>=<span class="st0">"com.mysql.jdbc.Driver"</span>
&nbsp;<span class="re0">connectionURL</span>=<span class="st0">"jdbcURL"</span>
&nbsp;<span class="re0">connectionName</span>=<span class="st0">"dbUser"</span>
&nbsp;<span class="re0">connectionPassword</span>=<span class="st0">"dbPwd"</span>
&nbsp;<span class="re0">userRoleTable</span>=<span class="st0">"role_table"</span>
&nbsp;<span class="re0">userTable</span>=<span class="st0">"user_table"</span>
&nbsp;<span class="re0">userNameCol</span>=<span class="st0">"dbuser_column"</span>
&nbsp;<span class="re0">userCredCol</span>=<span class="st0">"dbpwd_column"</span>
&nbsp;<span class="re0">roleNameCol</span>=<span class="st0">"role_column"</span><span class="re2">/&gt;</span></span>
...</div>
</div>
</pre>
<p>Webapplication web.xml:</p>
<pre>
<div class="codesnip-container" >
<div class="codesnip"><span class="sc3"><span class="re1">&lt;web</span>-app<span class="re2">&gt;</span></span>
...
&nbsp;<span class="sc3"><span class="re1">&lt;security</span>-constraint<span class="re2">&gt;</span></span>
&nbsp; &nbsp;<span class="sc3"><span class="re1">&lt;web</span>-resource-collection<span class="re2">&gt;</span></span>
&nbsp; &nbsp; &nbsp;<span class="sc3"><span class="re1">&lt;web</span>-resource-name<span class="re2">&gt;</span></span>Secure area<span class="sc3"><span class="re1">&lt;/web</span>-resource-name<span class="re2">&gt;</span></span>
&nbsp; &nbsp; &nbsp;<span class="sc3"><span class="re1">&lt;url</span>-pattern<span class="re2">&gt;</span></span>/*<span class="sc3"><span class="re1">&lt;/url</span>-pattern<span class="re2">&gt;</span></span>
&nbsp; &nbsp;<span class="sc3"><span class="re1">&lt;/web</span>-resource-collection<span class="re2">&gt;</span></span>
&nbsp; &nbsp;<span class="sc3"><span class="re1">&lt;auth</span>-constraint<span class="re2">&gt;</span></span>
&nbsp; &nbsp; &nbsp;<span class="sc3"><span class="re1">&lt;role</span>-name<span class="re2">&gt;</span></span>admin<span class="sc3"><span class="re1">&lt;/role</span>-name<span class="re2">&gt;</span></span>
&nbsp; &nbsp;<span class="sc3"><span class="re1">&lt;/auth</span>-constraint<span class="re2">&gt;</span></span>
&nbsp;<span class="sc3"><span class="re1">&lt;/security</span>-constraint<span class="re2">&gt;</span></span>

&nbsp;<span class="sc3"><span class="re1">&lt;login</span>-config<span class="re2">&gt;</span></span>
&nbsp; &nbsp;<span class="sc3"><span class="coMULTI">&lt;!-- enabling HTTP Auth digest mode --&gt;</span></span>
&nbsp; &nbsp;<span class="sc3"><span class="re1">&lt;auth</span>-method<span class="re2">&gt;</span></span>DIGEST<span class="sc3"><span class="re1">&lt;/auth</span>-method<span class="re2">&gt;</span></span>
&nbsp; &nbsp;<span class="sc3"><span class="re1">&lt;realm</span>-name<span class="re2">&gt;</span></span>your-realm<span class="sc3"><span class="re1">&lt;/realm</span>-name<span class="re2">&gt;</span></span>
&nbsp;<span class="sc3"><span class="re1">&lt;/login</span>-config<span class="re2">&gt;</span></span>

&nbsp;<span class="sc3"><span class="coMULTI">&lt;!-- roles must be defined to be used in security-constraint --&gt;</span></span>
&nbsp;<span class="sc3"><span class="re1">&lt;security</span>-role<span class="re2">&gt;</span></span>
&nbsp; &nbsp;<span class="sc3"><span class="re1">&lt;description<span class="re2">&gt;</span></span></span>Role sample<span class="sc3"><span class="re1">&lt;/description<span class="re2">&gt;</span></span></span>
&nbsp; &nbsp;<span class="sc3"><span class="re1">&lt;role</span>-name<span class="re2">&gt;</span></span>admin<span class="sc3"><span class="re1">&lt;/role</span>-name<span class="re2">&gt;</span></span>
&nbsp;<span class="sc3"><span class="re1">&lt;/security</span>-role<span class="re2">&gt;</span></span>
...
<span class="sc3"><span class="re1">&lt;/web</span>-app<span class="re2">&gt;</span></span></div>
</div>
</pre>
<h3>Password patterns</h3>
<p>For HTTP Auth Digest tomcat expects a special cleartext pattern for the hashed password entry inside the database. Unfortunately the cleartext snippet is different from the one from Http Auth Basic (this took me some time to find out&#8230;).</p>
<p>Bash CLI samples for HTTP Auth password hashing (md5sum):</p>
<pre>
<div class="codesnip-container" ># Basic style (only the password without user or realm info is hashed)
echo -n password | md5sum
# Digest style (<b>'your-realm'</b> is entry from web.xml-&gt;login-config-&gt;realm-name)
echo -n username:your-realm:password | md5sum</div>
</pre>
<h3>Migration HTTP Auth Basic to Digest</h3>
<p>As you saw above tomcats Auth Basic and Digest cleartext password patterns are different. Therefore just switching the entry of <b>web.xml-&gt;login-config-&gt;auth-method</b> from <b>&#8216;BASIC&#8217;</b> to <b>&#8216;DIGEST&#8217;</b> wouldn&#8217;t suffice. I recommend to completely create a new database column (e.g. passwords_digest) so the separation and transition-path between Basic and Digest style is more clear. In case you hashed the Basic passwords already further more you have to reset the user passwords (the nature of good hashes are that you practically cannot map back to cleartext).</p>
<!-- Social Buttons Shared Counts Generated by Digg Digg plugin v4.2, 
    Author : Yong Mook Kim
    Website : http://www.mkyong.com/blog/digg-digg-wordpress-plugin/ -->			</div>	
			<p class="tagged"><span class="add_comment"><a href="../../2010/04/05/tomcat-jdbc-realm-in-digest-mode/index.html#respond" title="Comment on Tomcat JDBC-Realm in digest mode">&rarr; No Comments</a></span><strong>Tags:</strong> <a href="../../category/software-engineering/technologies-tools/index.html" title="View all posts in Technologies/Tools" rel="category tag">Technologies/Tools</a></p>
			<div class="clear"></div>
			
						
			
<div class="newer_older">
	 <div class="newer">&lt;<a href="../4/index.html" >Newer entries </a></div> 	<div class="older"><a href="../6/index.html" >Older entries</a>&gt;</div>
</div>
<div class="clear flat"></div>

			
				
		</div>
	

	
	</div>

	<div id="footer">
	
  
  <p>	 
    &copy; 2007&ndash;2010 Software Engineering blog &amp; .more  &mdash; <a href="../../sitemap.xml">Sitemap</a> &mdash; Manuel Aldana
		      
  </p>
  <p>
			<a href="http://www.mozilla.org/products/firefox/" target="_blank" title="Get Firefox"><img src="../../getfirefox_small.png"  border="0" alt="Get Firefox" /></a>  
</p>
  
	</div>
</div>

</body>
</html>
